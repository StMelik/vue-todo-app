(function(){var t={5570:function(t,s,e){"use strict";var a=e(9242),o=e(3396);const i=(0,o._)("div",{class:"container"},null,-1);function n(t,s,e,n,r,l){const u=(0,o.up)("FormAdd"),p=(0,o.up)("AppTitle"),c=(0,o.up)("AppFilter"),d=(0,o.up)("AppList"),k=(0,o.up)("PopupFilter");return(0,o.wg)(),(0,o.iD)(o.HY,null,[i,(0,o.Wm)(u),(0,o.Wm)(p),(0,o.Wm)(c),(0,o.Wm)(d),((0,o.wg)(),(0,o.j4)(o.lR,{to:"body"},[(0,o.Wm)(a.uT,{name:"popup"},{default:(0,o.w5)((()=>[t.isOpenPopup?((0,o.wg)(),(0,o.j4)(k,{key:0})):(0,o.kq)("",!0)])),_:1})])),(0,o._)("button",{class:"popup__close-button",onClick:s[0]||(s[0]=s=>t.setIsOpenPopup(!0))})],64)}var r=e(7139);const l={class:"form-add__label"},u=["value"],p={key:0,class:"form-add__error"},c=(0,o._)("button",{class:"form-add__add-button",title:"Добавить задачу"},null,-1);function d(t,s,e,i,n,d){return(0,o.wg)(),(0,o.iD)("form",{class:"form-add",novalidate:"",onSubmit:s[2]||(s[2]=(0,a.iM)((s=>d.handleSubmitForm(t.textTask)),["prevent"]))},[(0,o._)("label",l,[(0,o._)("input",{class:"form-add__input",type:"text",placeholder:"Задача?",required:"",value:t.textTask,onInput:s[0]||(s[0]=s=>t.setTextTask(s.target.value)),ref:"input"},null,40,u),(0,o.Wm)(a.uT,{name:"error"},{default:(0,o.w5)((()=>[t.validError?((0,o.wg)(),(0,o.iD)("p",p,(0,r.zw)(t.validError),1)):(0,o.kq)("",!0)])),_:1})]),(0,o._)("button",{class:(0,r.C_)([{"form-add__important-button_active":t.isImortantTask},"form-add__important-button"]),type:"button",onClick:s[1]||(s[1]=s=>t.setIsImortantTask(!t.isImortantTask)),title:"Отметить задачу важной"},null,2),c],32)}var k=e(65),h={name:"FormAdd",computed:{...(0,k.rn)({textTask:t=>t.appStatus.textTask,isImortantTask:t=>t.appStatus.isImortantTask,validError:t=>t.appStatus.validError,isMobile:t=>t.appStatus.isMobile,taskList:t=>t.taskData.taskList})},methods:{...(0,k.OI)({setTextTask:"appStatus/setTextTask",setIsImortantTask:"appStatus/setIsImortantTask",addTask:"taskData/addTask",setFilters:"appStatus/setFilters",setValidError:"appStatus/setValidError"}),switchFilter(){this.isImortantTask?this.setFilters({hasImportant:!0}):this.setFilters({hasProcess:!0})},createTask(t){return{id:Date.now(),text:t[0].toUpperCase()+t.slice(1).toLowerCase(),contextHide:!0,status:this.isImortantTask?"important":"process"}},validateTask(t,s,e,a=5e3){const o=this.taskList.find((s=>s.text.toLowerCase()===t.toLowerCase())),i=()=>{0!==i&&setTimeout((()=>{this.setValidError("")}),a)};return o?(this.setValidError("У вас уже есть такая задача!"),i(),!1):t.length<s||t.length>e?(this.setValidError(`Длина должна быть от ${s} до ${e} символов.`),i(),!1):(this.setValidError(""),!0)},focusInput(){this.$refs.input.focus()},handleSubmitForm(t){const s=this.validateTask(t,3,50);s&&(this.switchFilter(),this.addTask(this.createTask(t)),this.setTextTask(""),this.setIsImortantTask(!1),this.focusInput())}},watch:{isImortantTask(){this.focusInput()}},mounted(){this.isMobile||this.focusInput()}},m=e(89);const _=(0,m.Z)(h,[["render",d]]);var f=_;const T={class:"wrapper"},g=(0,o._)("h2",{class:"title"},"Ваши задачи",-1);function b(t,s,e,a,i,n){return(0,o.wg)(),(0,o.iD)("div",T,[g,(0,o._)("button",{class:"clear-button",onClick:s[0]||(s[0]=s=>t.$store.commit("taskData/clearList")),title:"Очистить выполненные задачи"},"Очистить")])}var v={name:"AppTitle"};const I=(0,m.Z)(v,[["render",b]]);var S=I;const L={class:"filter"};function D(t,s,e,a,i,n){return(0,o.wg)(),(0,o.iD)("div",L,[(0,o._)("button",{class:(0,r.C_)(["filter__button filter__button_important",{"filter__button_important-active":t.filters.hasImportant}]),onClick:s[0]||(s[0]=(...t)=>n.handleStateFilters&&n.handleStateFilters(...t)),title:"Показывать / скрывать важные задачи"},"Важные ("+(0,r.zw)(t.getImportantTasks.length)+")",3),(0,o._)("button",{class:(0,r.C_)(["filter__button filter__button_process",{"filter__button_process-active":t.filters.hasProcess}]),onClick:s[1]||(s[1]=(...t)=>n.handleStateFilters&&n.handleStateFilters(...t)),title:"Показывать / скрывать выполняемые задачи"},"В процессе ("+(0,r.zw)(t.getProcessTasks.length)+")",3),(0,o._)("button",{class:(0,r.C_)(["filter__button filter__button_done",{"filter__button_done-active":t.filters.hasDone}]),onClick:s[2]||(s[2]=(...t)=>n.handleStateFilters&&n.handleStateFilters(...t)),title:"Показывать / скрывать выполненные задачи"},"Выполненные ("+(0,r.zw)(t.getDoneTasks.length)+")",3)])}e(6699);var w={name:"AppFilter",computed:{...(0,k.rn)({filters:t=>t.appStatus.filters}),...(0,k.Se)({getImportantTasks:"taskData/getImportantTasks",getProcessTasks:"taskData/getProcessTasks",getDoneTasks:"taskData/getDoneTasks"})},methods:{...(0,k.OI)({setFilters:"appStatus/setFilters"}),handleStateFilters(t){const s=t.target.className.includes("important"),e=t.target.className.includes("process"),a=t.target.className.includes("done");s&&this.setFilters({hasImportant:!this.filters.hasImportant}),e&&this.setFilters({hasProcess:!this.filters.hasProcess}),a&&this.setFilters({hasDone:!this.filters.hasDone})}}};const x=(0,m.Z)(w,[["render",D],["__scopeId","data-v-b30e3456"]]);var F=x;const P={key:0,class:"todo-list"},O={key:1,class:"todo-list__warning"};function C(t,s,e,i,n,r){const l=(0,o.up)("TaskItem");return t.sortedTasks.length>0?((0,o.wg)(),(0,o.iD)("ol",P,[(0,o.Wm)(a.W3,{name:"list"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.sortedTasks,((t,s)=>((0,o.wg)(),(0,o.j4)(l,{key:t.id,task:t,index:s+1},null,8,["task","index"])))),128))])),_:1})])):((0,o.wg)(),(0,o.iD)("p",O,"Список задач пуст"))}const y={class:"todo-list__item-num"},E={class:"todo-list__item-context context-item"};function N(t,s,e,i,n,l){return(0,o.wg)(),(0,o.iD)("li",{class:(0,r.C_)(["todo-list__item",e.task.status]),ref:"todo"},[(0,o._)("p",y,(0,r.zw)(e.index)+". ",1),(0,o._)("p",{ref:"task",class:"todo-list__item-text"},(0,r.zw)(e.task.text),513),(0,o.Wm)(a.uT,{name:"context-item"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("div",E,[(0,o._)("button",{class:"context-item__button context-item__button_done",onClick:s[0]||(s[0]=t=>l.handleStatusTask(t,e.task.id)),title:"Отметить задачу выполненной"}),(0,o._)("button",{class:"context-item__button context-item__button_important",onClick:s[1]||(s[1]=t=>l.handleStatusTask(t,e.task.id)),title:"Отметить задачу важной"}),(0,o._)("button",{class:"context-item__button context-item__button_delete",onClick:s[2]||(s[2]=s=>t.deleteTask(e.task.id)),title:"Удалить задачу"})],512),[[a.F8,!e.task.contextHide]])])),_:1})],2)}var A={name:"TaskItem",props:{task:{type:Object,require:e(3585)},index:{type:Number,require:e(3585)}},computed:{...(0,k.rn)({isMobile:t=>t.appStatus.isMobile,taskList:t=>t.taskData.taskList})},methods:{...(0,k.OI)({setTaskContextHide:"taskData/setTaskContextHide",addTask:"taskData/addTask",setTaskStatus:"taskData/setTaskStatus",deleteTask:"taskData/deleteTask",loadTaskList:"taskData/loadTaskList"}),handleStatusTask(t,s){const e=t.target.className.includes("important"),a=t.target.className.includes("done"),o=this.taskList.find((t=>t.id===s)).status;this.setTaskContextHide({id:s,status:!0}),e&&("important"===o?this.setTaskStatus({id:s,status:"process"}):this.setTaskStatus({id:s,status:"important"})),a&&("done"===o?this.setTaskStatus({id:s,status:"process"}):this.setTaskStatus({id:s,status:"done"}))},changeContextOnMobile(){this.setTaskContextHide({id:this.task.id,status:!this.task.contextHide})}},mounted(){this.isMobile?this.$refs.task.addEventListener("pointerup",this.changeContextOnMobile):(this.$refs.todo.addEventListener("mouseenter",(()=>{this.setTaskContextHide({id:this.task.id,status:!1})})),this.$refs.todo.addEventListener("mouseleave",(()=>{this.setTaskContextHide({id:this.task.id,status:!0})})))}};const M=(0,m.Z)(A,[["render",N],["__scopeId","data-v-a7c72c56"]]);var H=M,Y={name:"AppList",components:{TaskItem:H},computed:{...(0,k.Se)({sortedTasks:"taskData/getSortedTasks"})},methods:{...(0,k.OI)({loadTaskList:"taskData/loadTaskList"})},mounted(){localStorage.getItem("todoList")&&this.loadTaskList(JSON.parse(localStorage.getItem("todoList")))}};const j=(0,m.Z)(Y,[["render",C],["__scopeId","data-v-07d81173"]]);var X=j;function z(t,s,e,i,n,l){return(0,o.wg)(),(0,o.j4)(a.uT,{name:"popup"},{default:(0,o.w5)((()=>[(0,o._)("div",{class:"popup",onClick:s[6]||(s[6]=s=>t.setIsOpenPopup(!1))},[(0,o._)("div",{class:"popup-filter",ref:"popup-menu",onClick:s[5]||(s[5]=(0,a.iM)((()=>{}),["stop"]))},[(0,o._)("button",{onClick:s[0]||(s[0]=s=>t.setIsOpenPopup(!1)),class:"popup-filter__close"}),(0,o._)("button",{class:(0,r.C_)(["popup-filter__button popup-filter__button_important",{"popup-filter__button_important-active":t.filters.hasImportant}]),onClick:s[1]||(s[1]=(...t)=>l.handleStateFilters&&l.handleStateFilters(...t)),title:"Показывать / скрывать важные задачи"},"Важные ("+(0,r.zw)(t.getImportantTasks.length)+")",3),(0,o._)("button",{class:(0,r.C_)(["popup-filter__button popup-filter__button_process",{"popup-filter__button_process-active":t.filters.hasProcess}]),onClick:s[2]||(s[2]=(...t)=>l.handleStateFilters&&l.handleStateFilters(...t)),title:"Показывать / скрывать выполняемые задачи"},"В процессе ("+(0,r.zw)(t.getProcessTasks.length)+")",3),(0,o._)("button",{class:(0,r.C_)(["popup-filter__button popup-filter__button_done",{"popup-filter__button_done-active":t.filters.hasDone}]),onClick:s[3]||(s[3]=(...t)=>l.handleStateFilters&&l.handleStateFilters(...t)),title:"Показывать / скрывать выполненные задачи"},"Выполненные ("+(0,r.zw)(t.getDoneTasks.length)+")",3),(0,o._)("button",{class:"popup-filter__button popup-filter__button_clear",onClick:s[4]||(s[4]=(...s)=>t.clearList&&t.clearList(...s)),title:"Очистить выполненные задачи"},"Очистить")],512)])])),_:1})}var W={name:"PopupFilter",data(){return{startX:0,startY:0,endX:0,endY:0}},computed:{...(0,k.rn)({filters:t=>t.appStatus.filters}),...(0,k.Se)({getImportantTasks:"taskData/getImportantTasks",getProcessTasks:"taskData/getProcessTasks",getDoneTasks:"taskData/getDoneTasks"}),calculateDeltaTouchPosition(){return{deltaX:this.endX-this.startX,deltaY:this.endY-this.startY}}},methods:{...(0,k.OI)({setFilters:"appStatus/setFilters",setIsOpenPopup:"appStatus/setIsOpenPopup",clearList:"taskData/clearList"}),handleStateFilters(t){const s=t.target.className.includes("important"),e=t.target.className.includes("process"),a=t.target.className.includes("done");s&&this.setFilters({hasImportant:!this.filters.hasImportant}),e&&this.setFilters({hasProcess:!this.filters.hasProcess}),a&&this.setFilters({hasDone:!this.filters.hasDone})},setStartTouchPosition(t){this.startX=t.changedTouches[0].clientX,this.startY=t.changedTouches[0].clientY},setEndTouchPosition(t){this.endX=t.changedTouches[0].clientX,this.endY=t.changedTouches[0].clientY},closePopupScroll({deltaX:t,deltaY:s}){t>=50&&s<50&&s>-50&&this.setIsOpenPopup(!1)}},watch:{calculateDeltaTouchPosition(t){this.closePopupScroll(t)}},mounted(){this.$refs["popup-menu"].addEventListener("touchstart",this.setStartTouchPosition),this.$refs["popup-menu"].addEventListener("touchend",this.setEndTouchPosition)}};const $=(0,m.Z)(W,[["render",z],["__scopeId","data-v-576f2558"]]);var V=$,Z={name:"App",components:{FormAdd:f,AppTitle:S,AppFilter:F,AppList:X,PopupFilter:V},computed:{...(0,k.rn)({isOpenPopup:t=>t.appStatus.isOpenPopup})},methods:{...(0,k.OI)({setFilters:"appStatus/setFilters",setIsOpenPopup:"appStatus/setIsOpenPopup",clearList:"taskData/clearList"})}};const q=(0,m.Z)(Z,[["render",n]]);var J=q,U={namespaced:"appStatus",state:{textTask:"",isImortantTask:!1,filters:{hasImportant:!0,hasProcess:!0,hasDone:!1},validError:"",isMobile:navigator.userAgent.toLowerCase().includes("mobile"),isOpenPopup:!1},mutations:{setTextTask(t,s){t.textTask=s},setIsImortantTask(t,s){t.isImortantTask=s},setFilters(t,s){t.filters={...t.filters,...s}},setValidError(t,s){t.validError=s},setIsOpenPopup(t,s){t.isOpenPopup=s}}},K={namespaced:"taskData",state:{taskList:[]},getters:{getImportantTasks(t){return t.taskList.filter((t=>"important"===t.status))},getProcessTasks(t){return t.taskList.filter((t=>"process"===t.status))},getDoneTasks(t){return t.taskList.filter((t=>"done"===t.status))},getSortedTasks(t,s,e){const a=e.appStatus.filters,o=s.getImportantTasks,i=s.getProcessTasks,n=s.getDoneTasks;return a.hasImportant&&a.hasProcess&&a.hasDone?[...o,...i,...n]:a.hasImportant&&a.hasProcess?[...o,...i]:a.hasImportant&&a.hasDone?[...o,...n]:a.hasProcess&&a.hasDone?[...i,...n]:a.hasImportant?o:a.hasProcess?i:a.hasDone?n:[]}},mutations:{addTask(t,s){t.taskList.push(s),localStorage.setItem("todoList",JSON.stringify(t.taskList))},setTaskStatus(t,{id:s,status:e}){const a=t.taskList.find((t=>t.id===s));a.status=e,localStorage.setItem("todoList",JSON.stringify(t.taskList))},deleteTask(t,s){t.taskList=t.taskList.filter((t=>t.id!==s)),localStorage.setItem("todoList",JSON.stringify(t.taskList))},setTaskContextHide(t,{id:s,status:e}){const a=t.taskList.find((t=>t.id===s));a&&(a.contextHide=e)},clearList(t){t.taskList=t.taskList.filter((t=>"done"!==t.status)),localStorage.setItem("todoList",JSON.stringify(t.taskList))},loadTaskList(t,s){t.taskList=s}}},R=(0,k.MT)({state:{},getters:{},mutations:{},actions:{},modules:{appStatus:U,taskData:K}});(0,a.ri)(J).use(R).mount("#app")},3585:function(t){function s(t){var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}s.keys=function(){return[]},s.resolve=s,s.id=3585,t.exports=s}},s={};function e(a){var o=s[a];if(void 0!==o)return o.exports;var i=s[a]={exports:{}};return t[a](i,i.exports,e),i.exports}e.m=t,function(){var t=[];e.O=function(s,a,o,i){if(!a){var n=1/0;for(p=0;p<t.length;p++){a=t[p][0],o=t[p][1],i=t[p][2];for(var r=!0,l=0;l<a.length;l++)(!1&i||n>=i)&&Object.keys(e.O).every((function(t){return e.O[t](a[l])}))?a.splice(l--,1):(r=!1,i<n&&(n=i));if(r){t.splice(p--,1);var u=o();void 0!==u&&(s=u)}}return s}i=i||0;for(var p=t.length;p>0&&t[p-1][2]>i;p--)t[p]=t[p-1];t[p]=[a,o,i]}}(),function(){e.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(s,{a:s}),s}}(),function(){e.d=function(t,s){for(var a in s)e.o(s,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:s[a]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)}}(),function(){var t={143:0};e.O.j=function(s){return 0===t[s]};var s=function(s,a){var o,i,n=a[0],r=a[1],l=a[2],u=0;if(n.some((function(s){return 0!==t[s]}))){for(o in r)e.o(r,o)&&(e.m[o]=r[o]);if(l)var p=l(e)}for(s&&s(a);u<n.length;u++)i=n[u],e.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return e.O(p)},a=self["webpackChunkvue_todo_app"]=self["webpackChunkvue_todo_app"]||[];a.forEach(s.bind(null,0)),a.push=s.bind(null,a.push.bind(a))}();var a=e.O(void 0,[998],(function(){return e(5570)}));a=e.O(a)})();
//# sourceMappingURL=app.b229337a.js.map