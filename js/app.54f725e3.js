(function(){var t={1874:function(t,s,e){"use strict";var a=e(9242),o=e(3396);const n=(0,o._)("div",{class:"container"},null,-1);function i(t,s,e,i,r,l){const u=(0,o.up)("FormAdd"),c=(0,o.up)("AppTitle"),p=(0,o.up)("AppFilter"),d=(0,o.up)("AppList"),h=(0,o.up)("PopupFilter");return(0,o.wg)(),(0,o.iD)(o.HY,null,[n,(0,o.Wm)(u),(0,o.Wm)(c),(0,o.Wm)(p),(0,o.Wm)(d),((0,o.wg)(),(0,o.j4)(o.lR,{to:"body"},[(0,o.Wm)(a.uT,{name:"popup"},{default:(0,o.w5)((()=>[t.isOpenPopup?((0,o.wg)(),(0,o.j4)(h,{key:0})):(0,o.kq)("",!0)])),_:1})])),(0,o._)("button",{class:"popup__close-button",onClick:s[0]||(s[0]=s=>t.setIsOpenPopup(!0))})],64)}var r=e(7139);const l={class:"form-add__label"},u=["value"],c={key:0,class:"form-add__error"},p=(0,o._)("button",{class:"form-add__add-button",title:"Добавить задачу"},null,-1);function d(t,s,e,n,i,d){return(0,o.wg)(),(0,o.iD)("form",{class:"form-add",novalidate:"",onSubmit:s[2]||(s[2]=(0,a.iM)((s=>d.handleSubmitForm(t.task)),["prevent"]))},[(0,o._)("label",l,[(0,o._)("input",{class:"form-add__input",type:"text",placeholder:"Задача?",required:"",value:t.task,onInput:s[0]||(s[0]=s=>t.setTask(s.target.value)),ref:"input"},null,40,u),(0,o.Wm)(a.uT,{name:"error"},{default:(0,o.w5)((()=>[t.validError?((0,o.wg)(),(0,o.iD)("p",c,(0,r.zw)(t.validError),1)):(0,o.kq)("",!0)])),_:1})]),(0,o._)("button",{class:(0,r.C_)(["form-add__important-button",t.isImortantTask&&"form-add__important-button_active"]),type:"button",onClick:s[1]||(s[1]=(...t)=>d.handleIsImortantTask&&d.handleIsImortantTask(...t)),title:"Отметить задачу важной"},null,2),p],32)}var h=e(65),k={computed:{...(0,h.rn)({task:t=>t.appStatus.task,isImortantTask:t=>t.appStatus.isImortantTask,validError:t=>t.appStatus.validError,taskList:t=>t.taskData.taskList})},methods:{...(0,h.OI)({setTask:"appStatus/setTask",setIsImortantTask:"appStatus/setIsImortantTask",addTask:"taskData/addTask",setFilters:"appStatus/setFilters",setValidError:"appStatus/setValidError"}),handleIsImortantTask(){this.isImortantTask?this.setIsImortantTask(!1):this.setIsImortantTask(!0)},handleSubmitForm(t){const s=this.taskList.find((s=>s.text.toLowerCase()===t.toLowerCase()));if(t.length<3||t.length>35)return this.setValidError("Длина должна быть от 3 до 35 символов."),setTimeout((()=>{this.setValidError("")}),5e3);if(s)return this.setValidError("У вас уже есть такая задача!"),setTimeout((()=>{this.setValidError("")}),5e3);this.setValidError("");const e={id:Date.now(),text:t[0].toUpperCase()+t.slice(1).toLowerCase(),contextHide:!0,status:this.isImortantTask?"important":"process"};"important"===e.status?this.setFilters({hasImportant:!0}):this.setFilters({hasProcess:!0}),this.addTask(e),this.setTask(""),this.setIsImortantTask(!1),this.focusInput()},focusInput(){this.$refs.input.focus()}},watch:{isImortantTask(){this.focusInput()}},mounted(){this.focusInput()}},m=e(89);const _=(0,m.Z)(k,[["render",d]]);var f=_;const T={class:"wrapper"},g=(0,o._)("h2",{class:"title"},"Ваши задачи",-1);function I(t,s,e,a,n,i){return(0,o.wg)(),(0,o.iD)("div",T,[g,(0,o._)("button",{class:"clear-button",onClick:s[0]||(s[0]=(...s)=>t.clearList&&t.clearList(...s)),title:"Очистить выполненные задачи"},"Очистить")])}var b={methods:{...(0,h.OI)({clearList:"taskData/clearList"})}};const v=(0,m.Z)(b,[["render",I]]);var S=v;const D={class:"filter"};function L(t,s,e,a,n,i){return(0,o.wg)(),(0,o.iD)("div",D,[(0,o._)("button",{class:(0,r.C_)(["filter__button filter__button_important",t.filters.hasImportant&&"filter__button_important-active"]),onClick:s[0]||(s[0]=(...t)=>i.handleStateFilters&&i.handleStateFilters(...t)),title:"Показывать / скрывать важные задачи"},"Важные ("+(0,r.zw)(t.getImportantTasks.length)+")",3),(0,o._)("button",{class:(0,r.C_)(["filter__button filter__button_process",t.filters.hasProcess&&"filter__button_process-active"]),onClick:s[1]||(s[1]=(...t)=>i.handleStateFilters&&i.handleStateFilters(...t)),title:"Показывать / скрывать выполняемые задачи"},"В процессе ("+(0,r.zw)(t.getProcessTasks.length)+")",3),(0,o._)("button",{class:(0,r.C_)(["filter__button filter__button_done",t.filters.hasDone&&"filter__button_done-active"]),onClick:s[2]||(s[2]=(...t)=>i.handleStateFilters&&i.handleStateFilters(...t)),title:"Показывать / скрывать выполненные задачи"},"Выполненные ("+(0,r.zw)(t.getDoneTasks.length)+")",3)])}e(6699);var P={computed:{...(0,h.rn)({filters:t=>t.appStatus.filters}),...(0,h.Se)({getImportantTasks:"taskData/getImportantTasks",getProcessTasks:"taskData/getProcessTasks",getDoneTasks:"taskData/getDoneTasks"})},methods:{...(0,h.OI)({setFilters:"appStatus/setFilters"}),handleStateFilters(t){const s=t.target.className.includes("important"),e=t.target.className.includes("process"),a=t.target.className.includes("done");s?this.filters.hasImportant?this.setFilters({hasImportant:!1}):this.setFilters({hasImportant:!0}):e?this.filters.hasProcess?this.setFilters({hasProcess:!1}):this.setFilters({hasProcess:!0}):a&&(this.filters.hasDone?this.setFilters({hasDone:!1}):this.setFilters({hasDone:!0}))}}};const F=(0,m.Z)(P,[["render",L],["__scopeId","data-v-704c77a2"]]);var w=F;const C={key:0,class:"todo-list"},O={key:1,class:"todo-list__warning"};function x(t,s,e,n,i,r){const l=(0,o.up)("TaskItem");return t.sortedTasks.length>0?((0,o.wg)(),(0,o.iD)("ol",C,[(0,o.Wm)(a.W3,{name:"list"},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.sortedTasks,((t,s)=>((0,o.wg)(),(0,o.j4)(l,{key:t.id,task:t,index:s+1,onHandleStatusTask:r.handleStatusTask,onClickDeleteTask:r.clickDeleteTask},null,8,["task","index","onHandleStatusTask","onClickDeleteTask"])))),128))])),_:1})])):((0,o.wg)(),(0,o.iD)("p",O,"Список задач пуст"))}const E={class:"todo-list__item-num"},y={class:"todo-list__item-context context-item"};function H(t,s,e,n,i,l){return(0,o.wg)(),(0,o.iD)("li",{class:(0,r.C_)(["todo-list__item",e.task.status]),ref:"todo"},[(0,o._)("p",E,(0,r.zw)(e.index)+". ",1),(0,o._)("p",{ref:"task",class:"todo-list__item-text"},(0,r.zw)(e.task.text),513),(0,o.Wm)(a.uT,{name:"context-item"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("div",y,[(0,o._)("button",{class:"context-item__button context-item__button_done",onClick:s[0]||(s[0]=t=>l.handleStatusTask(t,e.task.id)),title:"Отметить задачу выполненной"}),(0,o._)("button",{class:"context-item__button context-item__button_important",onClick:s[1]||(s[1]=t=>l.handleStatusTask(t,e.task.id)),title:"Отметить задачу важной"}),(0,o._)("button",{class:"context-item__button context-item__button_delete",onClick:s[2]||(s[2]=t=>l.clickDeleteTask(e.task.id)),title:"Удалить задачу"})],512),[[a.F8,!e.task.contextHide]])])),_:1})],2)}var N={props:{task:{type:Object,require:e(3585)},index:{type:Number,require:e(3585)}},computed:{...(0,h.rn)({isMobile:t=>t.appStatus.isMobile})},methods:{...(0,h.OI)({setTaskContextHide:"taskData/setTaskContextHide"}),handleStatusTask(t,s){this.setTaskContextHide({id:s,status:!0}),this.$emit("handleStatusTask",t,s)},clickDeleteTask(t){this.$emit("clickDeleteTask",t)},addMouseEvent(t){this.$refs.todo.addEventListener("mouseenter",(()=>{console.log("mouseenter"),!1!==this.task.contextHide&&this.setTaskContextHide({id:t,status:!1})})),this.$refs.todo.addEventListener("mouseleave",(()=>{console.log("mouseleave"),!0!==this.task.contextHide&&this.setTaskContextHide({id:t,status:!0})}))},handleVisibleContextMenu(t){const s=this.$refs.task;s.addEventListener("pointerup",(()=>{this.setTaskContextHide({id:t,status:!this.task.contextHide})}))},handleContextMenu(t){this.isMobile?this.handleVisibleContextMenu(t):this.addMouseEvent(t)}},mounted(){this.handleContextMenu(this.task.id)}};const M=(0,m.Z)(N,[["render",H],["__scopeId","data-v-18b379c6"]]);var Y=M,j={components:{TaskItem:Y},computed:{...(0,h.rn)({taskList:t=>t.taskData.taskList}),...(0,h.Se)({sortedTasks:"taskData/sortedTasks"})},methods:{...(0,h.OI)({addTask:"taskData/addTask",setTaskStatus:"taskData/setTaskStatus",deleteTask:"taskData/deleteTask",loadTaskList:"taskData/loadTaskList"}),handleStatusTask(t,s){const e=t.target.className.includes("important"),a=t.target.className.includes("done"),o=this.taskList.find((t=>t.id===s)).status;e?"important"===o?this.setTaskStatus({id:s,status:"process"}):this.setTaskStatus({id:s,status:"important"}):a&&("done"===o?this.setTaskStatus({id:s,status:"process"}):this.setTaskStatus({id:s,status:"done"}))},clickDeleteTask(t){this.deleteTask(t)}},mounted(){localStorage.getItem("todoList")&&this.loadTaskList(JSON.parse(localStorage.getItem("todoList")))},updated(){console.log("UPDATED")}};const A=(0,m.Z)(j,[["render",x],["__scopeId","data-v-6baadf64"]]);var V=A;function X(t,s,e,n,i,l){return(0,o.wg)(),(0,o.j4)(a.uT,{name:"popup"},{default:(0,o.w5)((()=>[(0,o._)("div",{class:"popup",onClick:s[6]||(s[6]=s=>t.setIsOpenPopup(!1))},[(0,o._)("div",{class:"popup-filter",ref:"popup-menu",onClick:s[5]||(s[5]=(0,a.iM)((()=>{}),["stop"]))},[(0,o._)("button",{onClick:s[0]||(s[0]=s=>t.setIsOpenPopup(!1)),class:"popup-filter__close"}),(0,o._)("button",{class:(0,r.C_)(["popup-filter__button popup-filter__button_important",t.filters.hasImportant&&"popup-filter__button_important-active"]),onClick:s[1]||(s[1]=(...t)=>l.handleStateFilters&&l.handleStateFilters(...t)),title:"Показывать / скрывать важные задачи"},"Важные ("+(0,r.zw)(t.getImportantTasks.length)+")",3),(0,o._)("button",{class:(0,r.C_)(["popup-filter__button popup-filter__button_process",t.filters.hasProcess&&"popup-filter__button_process-active"]),onClick:s[2]||(s[2]=(...t)=>l.handleStateFilters&&l.handleStateFilters(...t)),title:"Показывать / скрывать выполняемые задачи"},"В процессе ("+(0,r.zw)(t.getProcessTasks.length)+")",3),(0,o._)("button",{class:(0,r.C_)(["popup-filter__button popup-filter__button_done",t.filters.hasDone&&"popup-filter__button_done-active"]),onClick:s[3]||(s[3]=(...t)=>l.handleStateFilters&&l.handleStateFilters(...t)),title:"Показывать / скрывать выполненные задачи"},"Выполненные ("+(0,r.zw)(t.getDoneTasks.length)+")",3),(0,o._)("button",{class:"popup-filter__button popup-filter__button_clear",onClick:s[4]||(s[4]=(...s)=>t.clearList&&t.clearList(...s)),title:"Очистить выполненные задачи"},"Очистить")],512)])])),_:1})}var z={data(){return{startX:0,startY:0,endX:0,endY:0}},computed:{...(0,h.rn)({filters:t=>t.appStatus.filters}),...(0,h.Se)({getImportantTasks:"taskData/getImportantTasks",getProcessTasks:"taskData/getProcessTasks",getDoneTasks:"taskData/getDoneTasks"}),calculateDeltaTouchPosition(){return{deltaX:this.endX-this.startX,deltaY:this.endY-this.startY}}},methods:{...(0,h.OI)({setFilters:"appStatus/setFilters",setIsOpenPopup:"appStatus/setIsOpenPopup",clearList:"taskData/clearList"}),handleStateFilters(t){const s=t.target.className.includes("important"),e=t.target.className.includes("process"),a=t.target.className.includes("done");s?this.filters.hasImportant?this.setFilters({hasImportant:!1}):this.setFilters({hasImportant:!0}):e?this.filters.hasProcess?this.setFilters({hasProcess:!1}):this.setFilters({hasProcess:!0}):a&&(this.filters.hasDone?this.setFilters({hasDone:!1}):this.setFilters({hasDone:!0}))},setStartTouchPosition(t){console.log("start"),this.startX=t.changedTouches[0].clientX,this.startY=t.changedTouches[0].clientY},setEndTouchPosition(t){console.log("end"),this.endX=t.changedTouches[0].clientX,this.endY=t.changedTouches[0].clientY},closePopupScroll({deltaX:t,deltaY:s}){t>=50&&s<50&&s>-50&&this.setIsOpenPopup(!1)}},watch:{calculateDeltaTouchPosition(t){console.log("calc",t),this.closePopupScroll(t)}},mounted(){console.log("mounted"),this.$refs["popup-menu"].addEventListener("touchstart",this.setStartTouchPosition),this.$refs["popup-menu"].addEventListener("touchend",this.setEndTouchPosition)},unmounted(){console.log("unmounted")}};const W=(0,m.Z)(z,[["render",X],["__scopeId","data-v-7ac3052c"]]);var $=W,Z={name:"App",components:{FormAdd:f,AppTitle:S,AppFilter:w,AppList:V,PopupFilter:$},computed:{...(0,h.rn)({isOpenPopup:t=>t.appStatus.isOpenPopup})},methods:{...(0,h.OI)({setFilters:"appStatus/setFilters",setIsOpenPopup:"appStatus/setIsOpenPopup",clearList:"taskData/clearList"})}};const q=(0,m.Z)(Z,[["render",i]]);var J=q,U={namespaced:"appStatus",state:{task:"",isImortantTask:!1,filters:{hasImportant:!0,hasProcess:!0,hasDone:!1},validError:"",isMobile:navigator.userAgent.toLowerCase().includes("mobile"),isOpenPopup:!1},getters:{},mutations:{setTask(t,s){t.task=s},setIsImortantTask(t,s){t.isImortantTask=s},setFilters(t,s){t.filters={...t.filters,...s}},setValidError(t,s){t.validError=s},setIsOpenPopup(t,s){t.isOpenPopup=s}},actions:{}},K={namespaced:"taskData",state:{taskList:[]},getters:{getImportantTasks(t){return t.taskList.filter((t=>"important"===t.status))},getProcessTasks(t){return t.taskList.filter((t=>"process"===t.status))},getDoneTasks(t){return t.taskList.filter((t=>"done"===t.status))},sortedTasks(t,s,e){const a=e.appStatus.filters,o=s.getImportantTasks,n=s.getProcessTasks,i=s.getDoneTasks;return a.hasImportant&&a.hasProcess&&a.hasDone?[...o,...n,...i]:a.hasImportant&&a.hasProcess?[...o,...n]:a.hasImportant&&a.hasDone?[...o,...i]:a.hasProcess&&a.hasDone?[...n,...i]:a.hasImportant?o:a.hasProcess?n:a.hasDone?i:[]}},mutations:{addTask(t,s){t.taskList.push(s),localStorage.setItem("todoList",JSON.stringify(t.taskList))},setTaskStatus(t,{id:s,status:e}){const a=t.taskList.find((t=>t.id===s));a.status=e,localStorage.setItem("todoList",JSON.stringify(t.taskList))},deleteTask(t,s){t.taskList=t.taskList.filter((t=>t.id!==s)),localStorage.setItem("todoList",JSON.stringify(t.taskList))},setTaskContextHide(t,{id:s,status:e}){const a=t.taskList.find((t=>t.id===s));a.contextHide=e},clearList(t){t.taskList=t.taskList.filter((t=>"done"!==t.status)),localStorage.setItem("todoList",JSON.stringify(t.taskList))},loadTaskList(t,s){t.taskList=s}},actions:{}},R=(0,h.MT)({state:{},getters:{},mutations:{},actions:{},modules:{appStatus:U,taskData:K}});(0,a.ri)(J).use(R).mount("#app")},3585:function(t){function s(t){var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}s.keys=function(){return[]},s.resolve=s,s.id=3585,t.exports=s}},s={};function e(a){var o=s[a];if(void 0!==o)return o.exports;var n=s[a]={exports:{}};return t[a](n,n.exports,e),n.exports}e.m=t,function(){var t=[];e.O=function(s,a,o,n){if(!a){var i=1/0;for(c=0;c<t.length;c++){a=t[c][0],o=t[c][1],n=t[c][2];for(var r=!0,l=0;l<a.length;l++)(!1&n||i>=n)&&Object.keys(e.O).every((function(t){return e.O[t](a[l])}))?a.splice(l--,1):(r=!1,n<i&&(i=n));if(r){t.splice(c--,1);var u=o();void 0!==u&&(s=u)}}return s}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[a,o,n]}}(),function(){e.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(s,{a:s}),s}}(),function(){e.d=function(t,s){for(var a in s)e.o(s,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:s[a]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)}}(),function(){var t={143:0};e.O.j=function(s){return 0===t[s]};var s=function(s,a){var o,n,i=a[0],r=a[1],l=a[2],u=0;if(i.some((function(s){return 0!==t[s]}))){for(o in r)e.o(r,o)&&(e.m[o]=r[o]);if(l)var c=l(e)}for(s&&s(a);u<i.length;u++)n=i[u],e.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return e.O(c)},a=self["webpackChunkvue_todo_app"]=self["webpackChunkvue_todo_app"]||[];a.forEach(s.bind(null,0)),a.push=s.bind(null,a.push.bind(a))}();var a=e.O(void 0,[998],(function(){return e(1874)}));a=e.O(a)})();
//# sourceMappingURL=app.54f725e3.js.map